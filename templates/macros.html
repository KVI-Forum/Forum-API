<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forum</title>
    <link rel="stylesheet" href="../static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    {% macro load_header(user = None) %}
    <header>
        <div class="navbar">
            <a class="logo" href="/">ChatterBox</a>
            <nav>
                <a href="/">Home</a>
                <a href="/categories">Categories</a>
                <a href="/about">About</a>
                {% if user %}
                    {% if user.is_admin %}
                        <a href="/admin/manage-access">Manage Access</a>  <!-- ej tova e novo samo -->
                    {% endif %}
                    <a href="/" class="nav-item">Hello, {{ user.username }}</a>
                    <form action="/users/logout" method="post" style="display: inline;">
                        <button class="cta-button" type="submit">Logout</button>
                    </form>
                {% else %}
                    <a href="/users/login">Login</a>
                    <a href="/users/register">Register</a>
                {% endif %}
            </nav>
        </div>
    </header>
    {% endmacro %}

    {% macro load_categories(categories) %}
    <section class="forum-list">
        <div class="forum-header">
            <span>Categories</span>
        </div>

        {% for category in categories %}
        <div class="forum-item">
            <div class="forum-info">
                <h2>
                    <a href="/categories/{{ category.id }}">{{ category.name }}</a>
                </h2>
                <p>{{ category.description }}</p>
            </div>
        </div>
        {% endfor %}
    </section>
    {% endmacro %}

    {% macro load_messenger(user,contacts) %}
        {% if user %}
            <!-- Messenger Icon -->
            <div id="messenger-icon" onclick="toggleMessenger()" style="position: fixed; bottom: 20px; right: 20px; background-color: #4CAF50; color: white; padding: 15px; border-radius: 50%; cursor: pointer;">
                ðŸ’¬
            </div>

            <!-- Messenger Modal -->
            <div id="messenger-modal" style="display: none; position: fixed; bottom: 80px; right: 20px; width: 300px; background: white; border: 1px solid #ccc; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);">
                <div style="padding: 10px; background-color: #4CAF50; color: white; border-top-left-radius: 8px; border-top-right-radius: 8px;">
                    <strong>Messenger</strong>
                    <span style="float: right; cursor: pointer;" onclick="toggleMessenger()">âœ–</span>
                </div>
                <div id="contact-list" style="padding: 10px; max-height: 200px; overflow-y: auto;">
                    <ul>
                        {% for contact in contacts %}
                            <li onclick="openChat('{{ contact.username }}')">
                                {{ contact.username }}
                            </li>
                        {% endfor %}
                    </ul>
                </div>
                <div id="chat-box" style="display: none; padding: 10px; max-height: 200px; overflow-y: auto;">
                    <div id="messages"></div>
                    <input type="text" id="message-input" placeholder="Type a message..." style="width: 100%; padding: 8px;" onkeypress="sendMessage(event)">
                </div>
            </div>
        {% endif %}
    {% endmacro %}

</body>
</html>